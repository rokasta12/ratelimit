---
title: H3 / Nitro
description: Rate limiting for H3 and Nitro applications
---

## Installation

```bash
npm install @jf/ratelimit-h3
```

## Basic Usage

```ts
import { createApp, eventHandler } from "h3";
import { rateLimiter } from "@jf/ratelimit-h3";

const app = createApp();

app.use(
  rateLimiter({
    limit: 100,
    windowMs: 60_000,
  }),
);

app.use(eventHandler(() => "Hello!"));

export default app;
```

## Nitro Server Middleware

```ts
// server/middleware/ratelimit.ts
import { rateLimiter } from "@jf/ratelimit-h3";

export default rateLimiter({
  limit: 100,
  windowMs: 60_000,
});
```

## Access Rate Limit Info

```ts
// server/api/data.ts
export default eventHandler((event) => {
  const info = event.context.rateLimit;
  // { limit: 100, remaining: 99, reset: 1234567890 }

  return { data: "hello" };
});
```

## With Redis

```ts
// server/plugins/ratelimit.ts
import { createStorage } from "unstorage";
import redisDriver from "unstorage/drivers/redis";
import { createUnstorageStore } from "@jf/ratelimit-unstorage";

const storage = createStorage({
  driver: redisDriver({ url: process.env.REDIS_URL }),
});

export const rateLimitStore = createUnstorageStore({ storage });

// server/middleware/ratelimit.ts
import { rateLimiter } from "@jf/ratelimit-h3";
import { rateLimitStore } from "../plugins/ratelimit";

export default rateLimiter({
  limit: 100,
  windowMs: 60_000,
  store: rateLimitStore,
});
```
